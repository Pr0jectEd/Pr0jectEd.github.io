CREATE TABLE Compte (
    email VARCHAR(255) PRIMARY KEY,
    mot_de_passe VARCHAR(255) NOT NULL,
    nom_pseudo VARCHAR(100) NOT NULL,
    actif BOOLEAN DEFAULT TRUE,
    signale BOOLEAN DEFAULT FALSE,
    banni BOOLEAN DEFAULT FALSE,
    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    type_de_compte ENUM('Rédacteur', 'Modérateur', 'Admin') NOT NULL,
    signale_par VARCHAR(255),
    date_signalement TIMESTAMP NULL,
    texte_signalement TEXT NULL,
    banni_par VARCHAR(255),
    date_bannissement TIMESTAMP NULL,
    texte_bannissement TEXT NULL,
    FOREIGN KEY (signale_par) REFERENCES Compte(email),
    FOREIGN KEY (banni_par) REFERENCES Compte(email)
);

CREATE TABLE Article (
    article_id INT AUTO_INCREMENT PRIMARY KEY,
    compte_email VARCHAR(255) NOT NULL,
    modere BOOLEAN DEFAULT FALSE,
    efface BOOLEAN DEFAULT FALSE,
    public_prive ENUM('Public', 'Privé') DEFAULT 'Public',
    titre VARCHAR(255) NOT NULL,
    contenu TEXT NOT NULL,
    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    date_modification TIMESTAMP NULL ON UPDATE CURRENT_TIMESTAMP,
    moderateur_email VARCHAR(255) NULL,
    date_moderation TIMESTAMP NULL,
    texte_moderateur TEXT NULL,
    FOREIGN KEY (compte_email) REFERENCES Compte(email),
    FOREIGN KEY (moderateur_email) REFERENCES Compte(email)
);

CREATE TABLE Commentaire (
    commentaire_id INT AUTO_INCREMENT PRIMARY KEY,
    compte_email VARCHAR(255) NOT NULL,
    article_id INT NOT NULL,
    modere BOOLEAN DEFAULT FALSE,
    efface BOOLEAN DEFAULT FALSE,
    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    date_modification TIMESTAMP NULL ON UPDATE CURRENT_TIMESTAMP,
    moderateur_email VARCHAR(255) NULL,
    date_moderation TIMESTAMP NULL,
    texte_moderateur TEXT NULL,
    FOREIGN KEY (compte_email) REFERENCES Compte(email),
    FOREIGN KEY (article_id) REFERENCES Article(article_id),
    FOREIGN KEY (moderateur_email) REFERENCES Compte(email)
);


Table: Compte
email	mot_de_passe	nom_pseudo	actif	signalé	banni	date_creation	type_de_compte	signalé_par	date_signalement	texte_signalement	banni_par	date_bannissement	texte_bannissement
alice@example.com	hashed123	Alice	TRUE	FALSE	FALSE	2024-03-01	Rédacteur	NULL	NULL	NULL	NULL	NULL	NULL
bob@example.com	hashed456	BobMod	TRUE	FALSE	FALSE	2024-03-02	Modérateur	NULL	NULL	NULL	NULL	NULL	NULL
admin@example.com	hashed789	AdminX	TRUE	FALSE	FALSE	2024-03-01	Admin	NULL	NULL	NULL	NULL	NULL	NULL

Table: Article
article_id	compte_email	modere	efface	public_prive	titre	contenu	date_creation	date_modification	moderateur_email	date_moderation	texte_moderateur
1	alice@example.com	FALSE	FALSE	Public	"My First Blog"	"This is my first post!"	2024-03-05	NULL	NULL	NULL	NULL
2	alice@example.com	TRUE	FALSE	Privé	"Hidden Thoughts"	"This is a private post."	2024-03-06	2024-03-07	bob@example.com	2024-03-07	"Inappropriate content removed"

Table: Commentaire
commentaire_id	compte_email	article_id	modere	efface	date_creation	date_modification	moderateur_email	date_moderation	texte_moderateur
1	bob@example.com	1	FALSE	FALSE	2024-03-06	NULL	NULL	NULL	NULL
2	alice@example.com	1	TRUE	TRUE	2024-03-07	2024-03-07